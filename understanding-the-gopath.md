### 理解GOPATH
### 由Gopher Guides撰写
本文将引导您理解GOPATH是什么，它是如何工作的，以及如何设置它。这是设置Go开发环境以及理解Go如何查找、安装和构建源文件的关键步骤。在本文中，当提到将要讨论的文件夹结构的概念时，我们将使用`GOPATH`。我们将使用`$GOPATH`来引用Go用于查找文件夹结构的环境变量。

[Go工作区](https://golang.org/doc/code.html#Workspaces)是Go管理源文件、已编译的二进制文件和用于稍后更快编译的缓存对象的方式。虽然可以有多个空间，但通常也建议只有一个Go工作区。`GOPATH`充当工作区的根文件夹。

### 设置`$GOPATH`环境变量

`$GOPATH`环境变量列出了Go查找Go工作区的位置。

默认情况下，Go假设我们的GOPATH位置在`$HOME/ Go`，其中`$HOME`是我们的用户帐户在计算机上的根目录。我们可以通过设置`$GOPATH`环境变量来更改。为了进一步学习，请按照本教程学习在`Linux`中阅读和设置环境变量。

有关设置`$GOPATH`变量的更多信息，请参见Go文档。

此外，本系列将介绍Go的安装和Go开发环境的设置。

### `$GOPATH`不是`$GOROOT`

`$GOROOT`是Go的代码、编译器和工具所在的位置——这不是我们的源代码。`$GOROOT`通常类似于`/usr/local/go`。我们的`$GOPATH`通常是$HOME/go。

虽然我们不再需要专门设置`$GOROOT`变量，但是在以前的资料中仍然引用了它。

现在，让我们讨论Go工作区的结构。

### Go工作路径分析

在Go工作区或`GOPATH`中，有三个目录：`bin`、`pkg`和`src`。每个目录对Go工具链都有特殊的意义。
```go
.
├── bin
├── pkg
└── src
  └── github.com/foo/bar
    └── bar.go
```

让我们看看每个目录。

`$GOPATH/bin`目录是放置安装编译文件的二进制文件的地方。我们的操作系统使用`$PATH`环境变量来查找无需完整路径即可执行的二进制应用程序。建议将此目录添加到全局$PATH变量中。

例如，如果我们没有在`$PATH`中添加`$GOPATH/bin`来执行一个程序，我们将需要运行:

```go
$ $GOPATH/bin/myapp
```

当`$GOPATH/bin`被添加到`$PATH`中，我们可以像这样进行相同的调用:

```go
$ myapp
```

`$GOPATH/pkg`目录存储预编译的目标文件，以加速程序的后续编译。通常，大多数开发人员不需要访问这个目录。如果遇到编译问题，可以安全地删除此目录，然后Go将重新构建它。

`src`目录是所有`.go`文件或源代码的位置。这不应该与Go工具使用的源代码相混淆，后者位于`$GOROOT`中。在编写Go应用程序、包和库时，我们将把这些文件放在`$GOPATH/src/path/to/code`下。

### 包是什么?

Go代码组织在包中。一个包表示磁盘上单个目录中的所有文件。一个目录只能包含来自同一包的某些文件。包和所有用户编写的Go源文件都存储在`$GOPATH/src`目录下。我们可以通过导入不同的包来理解包解析。

如果我们的代码运行在`$GOPATH/src/blue/red`，那么它的包名应该是红色的。

引入包的声明为:

```go
import "blue/red"
```

在源代码存储库中的包，如GitHub和BitBucket，将存储库的完整位置作为其导入路径的一部分。

例如，我们会在`https://github.com/gobuffalo/buffalo`使用以下导入路径导入源代码:

```go
import "github.com/gobuffalo/buffalo"
```

因此，此源代码将在磁盘上的以下位置:

```go
$GOPATH/src/github.com/gobuffalo/buffalo
```

### 结论

在本文中，我们将`GOPATH`作为Go期望我们的源代码驻留在其中的一组文件夹进行了讨论，还讨论了这些文件夹是什么以及它们包含什么。我们讨论了如何通过设置`$GOPATH`环境变量将默认的$HOME/go更改为用户选择的位置。最后，我们讨论了Go如何在该文件夹结构中搜索包。

Go 1.11中引入的Go模块旨在取代Go工作区和`GOPATH`。虽然建议开始使用模块，但有些环境(如公司环境)可能还没有准备好使用模块。

`GOPATH`是设置Go的一个比较棘手的方面，但是一旦设置好了，我们通常就会忘记它。